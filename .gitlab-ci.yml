---
image: centos:8

stages:
  - analysis
  - test

before_script:
  - yum -q -y install python3-pip python3-devel
  - python3 -m pip -q install --upgrade pip
  - python3 -m pip -q install -r requirements.txt
  - python3 -m pip -q install -r test-requirements.txt

lint:
  stage: analysis
  script:
    - pylint --disable=W0703,R0903,R0912 svetlana/*.py

test:
  stage: test
  script:
    - pytest --cov=svetlana -v
  coverage: '/TOTAL.*\s+(\d+%)$/'
